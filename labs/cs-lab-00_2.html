<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CS Lab 0.2</title>
  <link rel="shortcut icon" type="image/x-icon" href="../favicon.ico">
  <link rel="stylesheet" href="https://stackedit.io/style.css" />
</head>

<body class="stackedit">
  <div class="stackedit__html"><h1 id="настройка-репозитория">0.2 - настройка репозитория</h1>
<blockquote>
<p>Лабораторная работа 0.2 для студентов курса “Основы программирования” 1 курса кафедры ИУ5 МГТУ им Н.Э. Баумана.</p>
</blockquote>
<h2 id="содержание">Содержание</h2>
<ol>
<li><a href="#%D1%86%D0%B5%D0%BB%D1%8C-%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%8B">Цель работы</a></li>
<li><a href="#%D0%B2%D0%B2%D0%B5%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5">Введение</a></li>
<li><a href="#%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-ssh-%D1%81%D0%BE%D0%B5%D0%B4%D0%B8%D0%BD%D0%B5%D0%BD%D0%B8%D1%8F-%D1%81-github">Настройка ssh-соединения с GitHub</a></li>
<li><a href="#%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5-%D1%81%D0%BE%D0%B1%D1%81%D1%82%D0%B2%D0%B5%D0%BD%D0%BD%D0%BE%D0%B3%D0%BE-%D1%80%D0%B5%D0%BF%D0%BE%D0%B7%D0%B8%D1%82%D0%BE%D1%80%D0%B8%D1%8F">Создание собственного репозитория</a></li>
<li><a href="#%D0%B4%D0%BE%D0%B1%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5-%D1%84%D0%B0%D0%B9%D0%BB%D0%B0-%D1%81-%D0%B8%D1%81%D1%85%D0%BE%D0%B4%D0%BD%D1%8B%D0%BC-%D0%BA%D0%BE%D0%B4%D0%BE%D0%BC-%D0%B2-%D1%80%D0%B5%D0%BF%D0%BE%D0%B7%D0%B8%D1%82%D0%BE%D1%80%D0%B8%D0%B9">Добавление файла с исходным кодом в репозиторий</a></li>
<li><a href="#%D0%BF%D1%83%D1%88-%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2-%D0%B2-%D1%83%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%BD%D1%8B%D0%B9-%D1%80%D0%B5%D0%BF%D0%BE%D0%B7%D0%B8%D1%82%D0%BE%D1%80%D0%B8%D0%B9-%D0%BD%D0%B0-github">Пуш файлов в удаленный репозиторий на GitHub</a></li>
</ol>
<h2 id="цель-работы">Цель работы</h2>
<p>Освоить базовые навыки работы с гитом. Создать собственный репозиторий на GitHub, в котором будут выполняться лабораторные работы в рамках курса по основам программирования.</p>
<h2 id="введение">Введение</h2>
<p>В данной лабораторной работе будет рассказано как:</p>
<ul>
<li>Настроить ssh-соединение с GitHub;</li>
<li>Создать свой собственный репозиторий для сдачи лабораторных работ и подключить его к основному репозиторию с информацией о лабораторных работах;</li>
<li>Написать и проверить свою работу на соответствие минимальным требованиям для сдачи;</li>
<li>Залить свою работу в свой репозиторий в GitHub.</li>
</ul>
<h2 id="настройка-ssh-соединения-с-github">Настройка ssh-соединения с GitHub</h2>
<blockquote>
<p>Данные указания по умолчанию относятся к операционным системам семейства Linux. Если у вас стоит WSL, то все действия следует выполнять в Linux, а не Windows консоли. Для MacOS рядом будут даны отдельные инструкции.</p>
</blockquote>
<p>Сначала заведите свой аккаунт на <a href="http://github.com">github.com</a>.</p>
<p>В консоли Linux убедитесь, что у вас стоит <strong>git</strong>. Для этого введите следующую команду:</p>
<pre><code>git --version
</code></pre>
<p>При необходимости поставьте <strong>git</strong> через команду:</p>
<pre><code>sudo apt install git
</code></pre>
<blockquote>
<p>ssh-соединение позволит работать с GitHib, аутентифицируясь через специальный приватный ключ, локально располагающийся на вашем устройстве. ssh-соединение категорически НЕ СЛЕДУЕТ настраивать на устройствах, предполагающих общий доступ (компьютеры в лабораторных аудиториях и т.п.).</p>
</blockquote>
<p>Сгенерируйте ssh ключ следующей командой, где <code>your_email@example.com</code> следует заменить вашей почтой, на которую зарегистрирован аккаунт в GitHub.</p>
<pre><code>ssh-keygen -t ed25519 -C "your_email@example.com"
</code></pre>
<p>Подтвердите расположение файла по умолчанию (нажав клавишу <em>enter</em>, дополнительно писать ничего не надо). Затем введите passphrase (<strong>можно (и в данный момент рекомендуется) использовать пустую</strong>, для этого просто снова нажмите <em>enter</em> без ввода). Подтвердите введенную passphrase.</p>
<p>Убедитесь, что в выводе присутствует ваш <strong>fingerprint</strong> и <strong>key’s randomart image</strong>.</p>
<p>Запустите приложение <strong>ssh-agent</strong> в фоне. Для этого введите следующую команду:</p>
<pre><code>eval "$(ssh-agent -s)"
</code></pre>
<p>Убедитесь, что в консоли вывелось следующее:</p>
<pre><code>Agent pid ******
</code></pre>
<p>Где ****** - некоторое число.</p>
<p>Добавьте ваш приватный ключ в ssh-agent (<strong>только для Linux</strong>):</p>
<pre><code>ssh-add ~/.ssh/id_ed25519
</code></pre>
<p><strong>Только для MacOS</strong>:</p>
<pre><code>ssh-add --apple-use-keychain ~/.ssh/id_ed25519
</code></pre>
<p>Выведите в консоль публичный ключ (<strong>только для Linux</strong>):</p>
<pre><code>cat ~/.ssh/id_ed25519.pub
</code></pre>
<p>Скопируйте вывод из консоли.</p>
<p>Либо (<strong>только для MacOS</strong>) скопируйте в буфер обмена публичный ключ:</p>
<pre><code>pbcopy &lt; ~/.ssh/id_ed25519.pub
</code></pre>
<p>Затем пройдите на <a href="http://github.com">github.com</a>, в правом верхнем углу нажмите по иконке своего профиля, откройте настройки (Settings).</p>
<p><img src="https://sun9-60.userapi.com/impg/oCv3FlSc4RTg0WE7r6TvNYvTZ-RadR6xPza5nw/hPtp6ICDXJE.jpg?size=308x621&amp;quality=96&amp;sign=c99e336f6afb2965e179258924d98049&amp;type=album" alt="enter image description here"></p>
<p>Слева в разделе “Access” выберите вкладку “SSH and GPG keys”.</p>
<p><img src="https://sun9-50.userapi.com/impg/hs4E9UJhR1Dcnu7saEcnh2BnX46T8Ahlq34F-Q/3XMWgSiOqlU.jpg?size=316x305&amp;quality=96&amp;sign=70a514c90dbb8b168da19dc3701f94d5&amp;type=album" alt="enter image description here"></p>
<p>Справа сверху нажмите на кнопку “New SSH key”. В поле “Title” введите название, которое будет описывать назначение данного ключа. В поле “Key” вставьте публичный ключ (который скопировали ранее). Подтвердите добавление нажав на кнопку “Add SSH key”.</p>
<p>Проверьте, что вы успешно настроили ssh-соединение. Для этого введите в консоли следующую команду:</p>
<pre><code>ssh -T git@github.com
</code></pre>
<p>Подтвердите, что вы хотите установить соединение, написав “yes” (без кавычек) и нажав <strong>enter</strong>.</p>
<p>Убедитесь, что вывод соответствует следующему (где “username” - это ваш логин на <a href="http://github.com">github.com</a>):</p>
<pre><code>Hi username! You've successfully authenticated, but GitHub does not provide shell access.
</code></pre>
<h2 id="создание-собственного-репозитория">Создание собственного репозитория</h2>
<p>Зайдите на <a href="http://github.com">github.com</a> и создайте новый <strong>пустой</strong> приватный репозиторий.</p>
<p>Для этого нажмите на кнопку “New” в левой части главной страницы.</p>
<p><img src="https://sun9-29.userapi.com/impg/QR5z7B17CqSYQPlHH30_-VZvUV2h-Cuzv3qAhw/cElTmizKyE8.jpg?size=325x92&amp;quality=96&amp;sign=96f218c2ea7d5989eabdb99727d352db&amp;type=album" alt="enter image description here"></p>
<p>Назовите его так, как считаете нужным, но желательно достаточно информативно. Например, Lastname-CS-Labs-2024, где вместо “Lastname” должна быть ваша фамилия на латинице.</p>
<p>Убедитесь, что вы создаете приватный, а не публичный репозиторий (должен стоять флажок напротив “Private”).</p>
<p><img src="https://sun9-1.userapi.com/impg/fE3heNkkrizGdsyRsFTKon7jM2qRloNs5Yrm7A/uxQrb7yOE6A.jpg?size=525x127&amp;quality=96&amp;sign=77d613b0b6bd90e04c11bac97124fba2&amp;type=album" alt="enter image description here"></p>
<p>Оставьте все остальные настройки без изменений.</p>
<p><img src="https://sun9-70.userapi.com/impg/Emyo9js9LsY1dd2DDK0-UN5gmnovcOub7_QzYw/qk3ApaA0Bm0.jpg?size=741x337&amp;quality=96&amp;sign=b556d3ac4144f6fee903e2cefbe8dc94&amp;type=album" alt="enter image description here"></p>
<p>Создайте репозиторий, нажав на кнопку “Create repository”.</p>
<p>Открыв консоль Linux, перейдите в ту директорию, в которую вы хотите склонировать репозиторий. На странице вашего репозитория на <a href="http://github.com">github.com</a>, скопируйте ssh-ссылку на него (имеет формат вида <code>git@github.com:Username/Repo.git</code>). Склонируйте репозиторий с помощью команды:</p>
<pre><code>git clone repo-url
</code></pre>
<p>Где repo-url - ssh-ссылка на ваш репозиторий. После этого в текущий директории должна появиться новая директория с вашим репозиторием. Перейдите в нее с помощью команды <strong>cd</strong>.</p>
<p>Добавьте в качестве дополнительного удаленного репозитория публичный <a href="https://github.com/Arugaf/CS-IU5-Labs-2024">репозиторий</a> с лабораторными работами. Для этого введите следующую команду:</p>
<pre><code>git remote add upstream git@github.com:Arugaf/CS-IU5-Labs-2024.git
</code></pre>
<p>Где <em>remote add</em> - указание на то, что нужно добавить дополнительный удаленный репозиторий, <em>upstream</em> - метка (название) удаленного репозитория (можно изменить на другое по желанию), <code>git@github.com:Arugaf/CS-IU5-Labs-2024.git</code> - ссылка на удаленный репозиторий.</p>
<p>Убедитесь, что удаленный репозиторий успешно добавлен:</p>
<pre><code>git remote -v
</code></pre>
<p>Данная команда выведет в консоль список удаленных репозиториев. Должно быть по два репозитория на fetch и pull: origin (ваш “родной” удаленный репозиторий) и upstream (или то название, которое вы указали в предыдущей команде, означающее основной удаленный репозиторий).</p>
<p>Чтобы подгрузить изменения из удаленного репозитория с меткой “upstream”, введите следующую команду:</p>
<pre><code>git pull upstream
</code></pre>
<p>После чего перейдите на основную ветку репозитория с этой меткой, тем самым привязав ее к основной ветке вашего origin репозитория:</p>
<pre><code>git checkout main
</code></pre>
<p>Запушьте основную ветку в удаленный репозиторий:</p>
<pre><code>git push --set-upstream origin main
</code></pre>
<p>Затем перейдите на ветку с нулевой лабораторной работой:</p>
<pre><code>git checkout lab_0
</code></pre>
<p>И также запушьте ее в свой удаленный репозиторий:</p>
<pre><code>git push --set-upstream origin lab_0
</code></pre>
<p>Откройте свой удаленный репозиторий на <a href="http://github.com">github.com</a> и убедитесь, что в нем отображаются обе ветки с названиями “main” и “lab_0”, и их содержимое аналогично основному репозиторию (<a href="https://github.com/Arugaf/CS-IU5-Labs-2024">https://github.com/Arugaf/CS-IU5-Labs-2024</a>).</p>
<blockquote>
<p>В дальнейшем, когда в основном репозитории будут появляться новые ветки, необходимо будет повторять те же самые действия: <code>git pull upstream</code>, <code>git checkout lab_*</code>, <code>git push --set-upstream origin lab_*</code>. Это позволит подхватить из основного репозитория новую ветку с соответствующей лабораторной работой, привязать ее к вашему репозиторию, и отправить ее на ваш удаленный репозиторий на <a href="http://github.com">github.com</a>.</p>
</blockquote>
<h2 id="добавление-файла-с-исходным-кодом-в-репозиторий">Добавление файла с исходным кодом в репозиторий</h2>
<p>Убедитесь, что вы находитесь в директории с вашим репозиторием на ветке “lab_0”. Для этого введите следующую команду:</p>
<pre><code>git status
</code></pre>
<p>Убедитесь, что вывод соответствует следующему:</p>
<pre><code>On branch lab_0
Your branch is up to date with 'origin/lab_0'.

nothing to commit, working tree clean
</code></pre>
<p>Откройте через консоль текущую директорию в VS Code:</p>
<pre><code>code .
</code></pre>
<p>Где “<strong>.</strong>” - это указание на то, что нужно открыть текущую директорию.</p>
<p>Создайте новый файл .cpp файл, в котором будете писать код. Например, “main.cpp”. Скопируйте и вставьте туда следующий код:</p>
<pre class=" language-cpp"><code class="prism  language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Hello, World!"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre>
<p>Скомпилируйте файл с исходным кодом:</p>
<pre><code>g++ -std=c++20 -Wall -Werror -Wextra -Wpedantic main.cpp -o hello.out
</code></pre>
<p>Где вместо “main.cpp” подставьте имя своего файла с исходным кодом.</p>
<p>Убедитесь, что компиляция прошла успешно (должен появиться исполняемый файл с названием hello.out).</p>
<p>Запустите <strong>clang-format</strong> следующим образом:</p>
<pre><code>clang-format --dry-run -Werror main.cpp
</code></pre>
<p>Где “<em>–dry-run</em>” - флаг, указывающий на то, что <strong>clang-format</strong> должен показывать какие нужно внести изменения, вместо того, чтобы выводить уже измененный код, “<em>-Werror</em>” - флаг, который указывает <strong>clang-format</strong> считать все предупреждения как ошибки, “<em>main.cpp</em>” - название вашего файла с исходным кодом.</p>
<p>Убедитесь, что <strong>clang-format</strong> завершился успешно и ничего не вывел. Для этого введите в консоль следующую команду:</p>
<pre><code>echo $?
</code></pre>
<p>Данная команда выведет в консоль тот код, который вернула последнее запущенное в текущей консоли приложение. Если это 0, то все в порядке, если любое другое число, то где-то произошла ошибка.</p>
<p>Запустите <strong>clang-tidy</strong>:</p>
<pre><code>clang-tidy main.cpp
</code></pre>
<p>Убедитесь, что <strong>clang-tidy</strong> не ругается на ваш код. Дополнительно проверьте код, который вернул <strong>clang-tidy</strong>:</p>
<pre><code>echo $?
</code></pre>
<blockquote>
<p>Данные действия требуется выполнять всегда в тех случаях, когда вы хотите сдать лабораторную работу.</p>
</blockquote>
<h2 id="пуш-файлов-в-удаленный-репозиторий-на-github">Пуш файлов в удаленный репозиторий на GitHub</h2>
<p>Находясь на ветке “lab_0” своего репозитория, убедитесь, что <strong>git</strong> “видит” только новый файл с исходным кодом.</p>
<p>Для этого введите в консоли следующее:</p>
<pre><code>git status
</code></pre>
<p>В untracked files должен быть показан только один файл: main.cpp (или файл с другим названием, который вы создали в предыдущем пункте):</p>
<pre><code>On branch lab_0
Your branch is up to date with 'origin/lab_0'.

Untracked files:
  (use "git add &lt;file&gt;..." to include in what will be committed)
        main.cpp

nothing added to commit but untracked files present (use "git add" to track)
</code></pre>
<p>Если <strong>git</strong> видит другие файлы (например, скомпилированный ранее исполняемый файл), то удалите их из директории.</p>
<p>Добавьте ваш файл с исходным кодом в индекс для коммита:</p>
<pre><code>git add --all
</code></pre>
<p><strong>или</strong></p>
<pre><code>git add main.cpp
</code></pre>
<p>Убедитесь, что файл проиндексирован для коммита:</p>
<pre><code>git status
</code></pre>
<p>После данной команды вывод должен быть следующим:</p>
<pre><code>On branch lab_0
Your branch is up to date with 'origin/lab_0'.

Changes to be committed:
  (use "git restore --staged &lt;file&gt;..." to unstage)
        new file:   main.cpp
</code></pre>
<p>Закоммитьте изменения:</p>
<pre><code>git commit -m "commit message"
</code></pre>
<p>Где вместо <code>commit message</code> введите <strong>на английском языке</strong> осмысленное сообщение к коммиту. Например, “add main.cpp”.</p>
<p>Запушьте созданный коммит в удаленный репозиторий (ветки локального и удаленного репозитория уже связаны между собой):</p>
<pre><code>git push
</code></pre>
<blockquote>
<p>В дальнейшем лабораторные работы выполняются прямо в соответствующей им ветке из <a href="https://github.com/Arugaf/CS-IU5-Labs-2024">основного репозитория</a>. Перед сдачей лабораторной работы надо будет закоммитить изменения и запушить их в свой удаленный репозиторий. Перед переключением между ветками (с помощью команды <code>git checkout branch_name</code> следует также коммитить изменения или складывать их в <a href="https://git-scm.com/docs/git-stash">stash</a>.</p>
</blockquote>
<p>Откройте на <a href="http://github.com">github.com</a> свой удаленный репозиторий и перейдите в ветку lab_0. Дождитесь, пока рядом с описанием коммита появится либо красный крестик, либо зеленая галочка.</p>
<p><img src="https://sun9-66.userapi.com/impg/fXVXBL4kb41vs2q-7kJuwwPQ7NFq0uFUOzd-yA/Mat2kf4wkHk.jpg?size=230x66&amp;quality=96&amp;sign=e373eeee28e2c2dc0e82914900811c01&amp;type=album" alt="enter image description here"></p>
<p>Если появился красный крестик, то щелкните по нему, чтобы открыть модульное окно с описанием запущенных автоматических проверок:</p>
<p><img src="https://sun9-37.userapi.com/impg/eIHYRKLe2WOUeIHcAlX9WlipwePjsj6ox6PynA/qHXz3gAgud4.jpg?size=636x192&amp;quality=96&amp;sign=53f1b6c0481b2d219369e7133c821264&amp;type=album" alt="enter image description here"></p>
<p>Щелкните по ссылке “Details”, чтобы открыть подробности для запущенной проверки и проанализируйте вывод, чтобы исправить возникшие проблемы. В случае необходимости обращайтесь к преподавателю.</p>
<p>Если все указания выполнены, то покажите преподавателю ваш локальный и удаленный репозитории, чтобы получить доступ к выполнению основных лабораторных работ.</p>
</div>
</body>

</html>
